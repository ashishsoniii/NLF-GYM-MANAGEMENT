import{u as B,Y as N,r as s,j as e,B as Y,Z as G,a as q,$ as M,S as a,T as m,I as L,J as I,H as S,a0 as g,W as $}from"./index-082a7ee0.js";import{C as D,a as k}from"./Card-d98dd1f2.js";import{T as o}from"./TextField-e01313c8.js";import{L as R}from"./LoadingButton-ce7f91fa.js";function H(){const P=B(),x=N(),[c,p]=s.useState(""),[d,f]=s.useState(""),[j,F]=s.useState(""),[y,z]=s.useState(""),[u,i]=s.useState(null),[v,h]=s.useState(!1),[r,b]=s.useState(!1),[w,C]=s.useState(!0),E=async()=>{var t,l;h(!0);try{const n=await k.post("https://nlfgymback-fnbebqhpgkemhwft.centralindia-01.azurewebsites.net/auth/adminLogin",{email:c,password:d});n.status===200?(localStorage.setItem("token",n.data.token),localStorage.setItem("email",n.data.email),localStorage.setItem("name",n.data.name),localStorage.setItem("phone",n.data.phone),x.push("../")):console.error("Login failed:",n.data.error)}catch(n){console.error("Error:",n),i(((l=(t=n.response)==null?void 0:t.data)==null?void 0:l.error)||"Login failed")}finally{h(!1)}},A=async()=>{var t,l;h(!0);try{const n=await k.post("https://nlfgymback-fnbebqhpgkemhwft.centralindia-01.azurewebsites.net/auth/adminRegistration",{name:j,email:c,password:d,specialization:"Admin Specialization",commissionRate:100,phone:y});n.status===201?(i("You are Registered Successfully, Please Login!"),x.push("/login")):console.error("Registration failed:",n.data.error)}catch(n){console.error("Error:",n),i(((l=(t=n.response)==null?void 0:t.data)==null?void 0:l.error)||"Registration failed")}finally{h(!1)}},T=e.jsxs(e.Fragment,{children:[e.jsxs(a,{spacing:3,children:[e.jsx(o,{name:"email",label:"Email address",value:c,onChange:t=>p(t.target.value)}),e.jsx(o,{name:"password",label:"Password",type:r?"text":"password",value:d,onChange:t=>f(t.target.value),InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(I,{onClick:()=>b(!r),edge:"end",children:e.jsx(S,{icon:r?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),u&&e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"flex-start",sx:{my:0,color:"red"},children:e.jsx("p",{children:u})}),e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(g,{variant:"subtitle2",underline:"hover",children:"Forgot password?"})}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:E,loading:v,children:"Login"}),e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"center",sx:{mt:2},children:e.jsxs(m,{variant:"body2",children:["Dont have an account?",e.jsx(g,{variant:"subtitle2",onClick:()=>{C(!1),i(null)},sx:{cursor:"pointer"},children:"Register"})]})})]}),W=e.jsxs(e.Fragment,{children:[e.jsxs(a,{spacing:3,py:3,children:[e.jsx(o,{name:"name",label:"Full Name",value:j,onChange:t=>F(t.target.value)}),e.jsx(o,{name:"email",label:"Email address",value:c,onChange:t=>p(t.target.value)}),e.jsx(o,{name:"password",label:"Password",type:r?"text":"password",value:d,onChange:t=>f(t.target.value),InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(I,{onClick:()=>b(!r),edge:"end",children:e.jsx(S,{icon:r?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(o,{name:"phone",label:"Phone Number",value:y,onChange:t=>z(t.target.value)})]}),u&&e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"flex-start",sx:{my:0,color:"red"},children:e.jsx("p",{children:u})}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:A,loading:v,children:"Register"}),e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"center",sx:{mt:2},children:e.jsxs(m,{variant:"body2",children:["Already have an account?"," ",e.jsx(g,{variant:"subtitle2",onClick:()=>{C(!0),i(null)},sx:{cursor:"pointer"},children:"Login"})]})})]});return e.jsxs(Y,{sx:{...G({color:q(P.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(M,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(a,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(D,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(m,{variant:"h4",children:"Welcome to GYM"}),e.jsx(m,{variant:"body2",sx:{mt:2,mb:2},children:w?"Admin Login":"Register for an account"}),w?T:W]})})]})}function _(){return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsx("title",{children:" Login | NLF GYM "})}),e.jsx(H,{})]})}export{_ as default};
